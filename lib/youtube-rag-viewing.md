# Как проверить, что RAG заполнена текстом из видео

## Способ 1: Визуальный просмотр (рекомендуется)

Откройте в браузере:
```
http://localhost:3000/youtube-rag
```

На странице вы увидите:
- **Статистику**: количество видео, чанков, общий размер текста
- **Список видео**: все импортированные видео с количеством чанков
- **Содержимое чанков**: текст из видео, разбитый на части
- **Поиск**: возможность искать по тексту чанков
- **Фильтрация**: просмотр чанков конкретного видео

### Возможности страницы:
- ✅ Клик по видео показывает только его чанки
- ✅ Поиск по тексту во всех чанках
- ✅ Просмотр времени начала/конца каждого чанка
- ✅ Прямые ссылки на видео на YouTube

## Способ 2: Через API

### Получить общую статистику:
```bash
curl http://localhost:3000/api/youtube/rag-content
```

### Получить чанки конкретного видео:
```bash
curl "http://localhost:3000/api/youtube/rag-content?videoId=VIDEO_ID"
```

### Поиск по тексту:
```bash
curl "http://localhost:3000/api/youtube/rag-content?search=запрос"
```

### Комбинированный запрос:
```bash
curl "http://localhost:3000/api/youtube/rag-content?videoId=VIDEO_ID&search=текст&limit=5"
```

## Способ 3: Через API импорта

### Проверить список импортированных видео:
```bash
curl http://localhost:3000/api/youtube/import
```

Ответ покажет:
- Список всех видео
- Количество чанков в каждом видео
- Общее количество чанков

## Способ 4: В логах сервера

При добавлении видео в консоли сервера вы увидите:
```
[Chat API] Initializing 3 YouTube videos...
[Chat API] YouTube videos initialized
```

При импорте через API:
```
Added video VIDEO_ID with 45 chunks
```

## Примеры использования

### 1. Проверить, что видео добавлено:
```bash
# Импортировать видео
curl -X POST http://localhost:3000/api/youtube/import \
  -H "Content-Type: application/json" \
  -d '{"videoIds": ["VIDEO_ID"]}'

# Проверить содержимое
curl http://localhost:3000/api/youtube/rag-content
```

### 2. Найти конкретный текст в видео:
```bash
curl "http://localhost:3000/api/youtube/rag-content?search=Grafana"
```

### 3. Посмотреть все чанки видео:
```bash
curl "http://localhost:3000/api/youtube/rag-content?videoId=VIDEO_ID&limit=100"
```

## Что проверить:

1. **Видео импортированы**: `GET /api/youtube/import` возвращает список видео
2. **Чанки созданы**: каждый видео имеет `chunksCount > 0`
3. **Текст присутствует**: в чанках есть реальный текст (не пустые)
4. **RAG работает**: при запросе в чат система находит релевантные чанки

## Устранение проблем:

### Видео не импортируется:
- Проверьте, что видео имеет автоматические субтитры
- Попробуйте другой язык (ru/en)
- Проверьте логи сервера на ошибки

### Чанки пустые:
- Видео может не иметь субтитров
- Попробуйте другое видео
- Проверьте, что транскрипт успешно получен

### RAG не находит текст:
- Убедитесь, что видео добавлено в систему
- Проверьте, что чанки содержат текст
- Попробуйте более точный поисковый запрос


